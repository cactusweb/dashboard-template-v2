<ryodan-wrapper
  *ngVar="reports$ | async as reports"
  [showList]="!!reports?.length"
  [pending]="!!(pending$ | async)"
  (update)="getReports()"
>
  <button
    header-btn
    class="btn btn--outline-primary"
    (click)="formOpened$.next(true)"
  >
    New reports
  </button>

  <ryodan-common-list
    list
    [items]="reports"
    (viewItem)="onViewReport($event)"
    (editItem)="onEditReport($event)"
  ></ryodan-common-list>
</ryodan-wrapper>

<ryodan-popup
  *ngIf="viewingReport"
  [windowTitle]="'Report №' + viewingReport.number"
  [state]="viewingReport.state"
  (close)="viewingReport = null"
>
  <ryodan-report-view [reportId]="viewingReport.id"></ryodan-report-view>
</ryodan-popup>

<ryodan-popup
  *ngIf="formOpened$ | async"
  [windowTitle]="editedReport ? 'Report №' + editedReport.number : 'New report'"
  (close)="onCloseReportForm()"
>
  <ryodan-report-form
    (close)="onCloseReportForm()"
    [reportId]="editedReport?.id"
  ></ryodan-report-form>
</ryodan-popup>
